<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.tracom.mapper.MO.MO0103Mapper">

	<select id="MO0103G0R0" parameterType="Map" resultType="Map">
		SELECT 		A.SLT_ID
				,	A.SLT_NM
				,	A.SLT_TYPE
				,	DL1.DL_CD_NM AS SLT_TYPE_CD
				,	A.SLT_ENM
				,	A.AREA
				,	DL2.DL_CD_NM AS AREA_CD
				,	A.MTNC_ID
				,	DATE_FORMAT(A.INST_DT,'%Y-%m-%d') INST_DT
				,	A.STTN_NO
				,	A.IP
				,	A.ADDR
				,	A.GPS_X
				,	A.GPS_Y
				,	A.ATTACH_ID
				,	A.USE_YN
				,	A.REMARK
				,	DATE_FORMAT(A.UPD_DTM, '%Y-%m-%d') UPD_DTM
				,	A.UPD_ID
		FROM		SLT_FCLT_MST A
		LEFT JOIN	PLF_DL_CD_INFO DL1
			ON		A.SLT_TYPE = DL1.DL_CD
			AND		DL1.CO_CD = 'SLT_TYPE'
		LEFT JOIN	PLF_DL_CD_INFO DL2
			ON		A.AREA = DL2.DL_CD
			AND		DL2.CO_CD = 'AREA'			
		<where>
			<if test= "CONTENT != null and CONTENT != ''">
				SLT_ID LIKE CONCAT('%',#{CONTENT},'%') || SLT_NM LIKE CONCAT('%',#{CONTENT},'%')
			</if>
		</where>
	</select>
	
	<select id="MO0103G1R0" parameterType="Map" resultType="Map">
		SELECT 	A.SLT_ID, 
				A.SLT_NM, 
				B.DVC_ID, 
				B.DVC_KIND, 
				DL1.DL_CD_NM AS DVC_KIND_CD,
				B.DVC_COORDS,
				C.PARAM_KIND,
				DL2.DL_CD_NM AS PARAM_KIND_CD			
				
		FROM SLT_FCLT_MST A 
			LEFT JOIN SLT_DVC_INFO B
 			ON A.SLT_ID = B.SLT_ID
 			
 			LEFT JOIN SLT_DVC_PARAM_INFO C
 			ON B.DVC_ID = C.DVC_ID
 			
 			LEFT JOIN PLF_DL_CD_INFO DL1
 			ON B.DVC_KIND = DL1.DL_CD
 			AND DL1.CO_CD = 'DVC_KIND'
 			
 			LEFT JOIN PLF_DL_CD_INFO DL2
 			ON C.PARAM_KIND = DL2.DL_CD
 			AND DL2.CO_CD = 'PARAM_KIND'
		
		WHERE	A.SLT_ID = #{CONDITION}
		AND		C.USE_YN = 'Y'
		
		ORDER BY B.DVC_KIND, C.PARAM_KIND ASC
	</select>
	


</mapper>
