<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.tracom.mapper.MO.MO0102Mapper">
	
	<select id="MO0102G0R0" resultType="Map">
		SELECT 
				A.DVC_KIND,
				DL1.DL_CD_NM AS DVC_KIND_CD
 		
 		FROM SLT_DVC_INFO A
		
		LEFT JOIN	PLF_DL_CD_INFO DL1
			ON		A.DVC_KIND = DL1.DL_CD
			AND		DL1.CO_CD = 'DVC_KIND'
			
		WHERE
			A.DVC_COORDS IS NOT NULL
		
		GROUP BY DVC_KIND
	</select>
	
	<select id="MO0102G1R0" parameterType="Map" resultType="Map">
	
		SELECT 	A.SLT_ID, 
				A.SLT_NM, 
				B.DVC_ID, 
				B.DVC_KIND, 
				DL1.DL_CD_NM AS DVC_KIND_CD,
				B.DVC_COORDS,
				B.INST_LOC,
				DL2.DL_CD_NM AS INST_LOC_CD,
				DL3.DL_CD_NM AS MAKER_ID_CD
				
		FROM SLT_FCLT_MST A 
			LEFT JOIN SLT_DVC_INFO B
 			ON A.SLT_ID = B.SLT_ID
 			
 			LEFT JOIN PLF_DL_CD_INFO DL1
 			ON B.DVC_KIND = DL1.DL_CD
 			AND DL1.CO_CD = 'DVC_KIND'
 			
 			LEFT JOIN PLF_DL_CD_INFO DL2
 			ON B.INST_LOC = DL2.DL_CD
 			AND DL2.CO_CD = 'INST_LOC'
 			
 			LEFT JOIN	PLF_DL_CD_INFO DL3
			ON		B.MAKER_ID = DL3.DL_CD
			AND	DL3.CO_CD = 'MAKER_ID'	
		
		WHERE 		B.DVC_KIND = #{CONTENT}
		AND			B.DVC_COORDS IS NOT NULL
		
		ORDER BY B.SLT_ID, B.DVC_ID ASC
		
	</select>
	
	<select id="MO0102G2R1" parameterType="Map" resultType="Map">
	
		SELECT 
				A.SLT_ID,
				A.DVC_ID,
				A.DVC_KIND,
				A.PARAM_DIV,
				DL1.DL_CD_NM AS PARAM_DIV_CD,
				A.PARAM_KIND,
				DL2.DL_CD_NM AS PARAM_KIND_CD,
				A.SN,
				A.ST_TIME,
				A.ED_TIME,
				A.DATA_VAL,
				A.REMARK,
				DATE_FORMAT(A.UPD_DTM, '%Y-%m-%d') UPD_DTM,
				A.UPD_ID
				
				FROM SLT_DVC_SCH_INFO A 
				LEFT JOIN PLF_DL_CD_INFO DL1
				ON A.PARAM_DIV = DL1.DL_CD
				AND DL1.CO_CD = 'PARAM_DIV'
				LEFT JOIN PLF_DL_CD_INFO DL2
				ON A.PARAM_KIND = DL2.DL_CD
				AND DL2.CO_CD = 'PARAM_KIND'
				
				WHERE		A.SLT_ID = #{OPTION1}
				AND		A.DVC_ID = #{OPTION2}
				AND		A.DVC_KIND = #{OPTION3}
				
				ORDER BY A.PARAM_KIND, A.SN

		
	</select>
	
	<select id="MO0102SHI0" parameterType="Map" resultType="Map">
		SELECT 	A.SLT_ID, 
				A.SLT_NM, 
				B.DVC_ID, 
				B.DVC_KIND, 
				DL1.DL_CD_NM AS DVC_KIND_CD,
				B.DVC_COORDS,
				C.PARAM_DIV,
				C.PARAM_KIND,
				C.DATA_TYPE,
				C.DATA_VAL,
				DL2.DL_CD_NM AS PARAM_KIND_CD			
				
		FROM SLT_FCLT_MST A 
			LEFT JOIN SLT_DVC_INFO B
 			ON A.SLT_ID = B.SLT_ID
 			
 			LEFT JOIN SLT_DVC_PARAM_INFO C
 			ON B.DVC_ID = C.DVC_ID
 			
 			LEFT JOIN PLF_DL_CD_INFO DL1
 			ON B.DVC_KIND = DL1.DL_CD
 			AND DL1.CO_CD = 'DVC_KIND'
 			
 			LEFT JOIN PLF_DL_CD_INFO DL2
 			ON C.PARAM_KIND = DL2.DL_CD
 			AND DL2.CO_CD = 'PARAM_KIND'
		
		WHERE	A.SLT_ID = #{CONTENT}
		AND B.DVC_ID = #{DEVICE}
		AND B.DVC_COORDS IS NOT NULL
		AND		C.USE_YN = 'Y'
		
		ORDER BY B.DVC_KIND, C.PARAM_KIND ASC
	</select>
	


</mapper>
